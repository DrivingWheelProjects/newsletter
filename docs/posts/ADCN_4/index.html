<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Brad Stenger">
<meta name="dcterms.date" content="2025-10-29">

<title>ADCN: Journaling, Stacks vs.&nbsp;Open, Big Data Bowl – newsletter</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-a37c72dd2dbac68997fcdc15a3622e78.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-33562ca0c45c858621f5a0460d4134bc.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">newsletter</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">ADCN: Journaling, Stacks vs.&nbsp;Open, Big Data Bowl</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Brad Stenger </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 29, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<div style="height:290">
    <iframe src="https://cdn.forms-content.sg-form.com/ed8875f7-7972-11f0-ad55-92cd5bc3b37f" width="340" height="300" scrolling="no"></iframe>
</div>

</div></div>
        
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="journaling-with-wearables" class="level3">
<h3 class="anchored" data-anchor-id="journaling-with-wearables">Journaling with Wearables</h3>
<p>“Expert in yourself” is not yet a norm but among high achievers in business and sports it is headed that way. Type A personalities drive the connection between data and habits since the technology is not quite easy enough to use. Call this stuff more of a really-want-to than a need-to at this point but the utility (and probably usability too) increasing dramatically as the benefit to cost ratio increases in the near future. Read on for why the big benefits are coming, and for why personal privacy is a factor.</p>
<p>Habits are personal behaviors. They defy universal generalization but there is <a href="https://knowledge.wharton.upenn.edu/podcast/this-week-in-business/what-machine-learning-reveals-about-forming-a-healthy-habit/">an emerging consensus</a> that gaining some habits (like gym-going) are harder and gaining other habits (like hand-washing) are easier. Self-awareness about what’s healthy, productive, or both healthy and productive, might be the shortest path for someone trying to make a habit out of good habits. <a href="https://highschool.latimes.com/opinion/review-the-power-of-tiny-wins-what-atomic-habits-taught-me-about-change/">Atomic Habits</a>, as put forward by author James Clear, is less a personal guide to habit-formation than it is a guide to self- and environmental-awareness so that you can give yourself the best chance to succeed at habit change.</p>
<p>High achievers often execute on a long development arc. It is not just talent, there is also an endurance factor where sustained improvement progresses year-over-year, sometimes decade-over-decade. No short cuts. Work life incorporates personal habits and self-expertise. Overall, self-knowledge takes guesswork out of finding effective collaborators and, when there is no collaboration, self-fulfillment plugs any gaps with still more self-development productivity.</p>
<p>A <a href="https://www.nytimes.com/athletic/6665943/2025/09/29/sports-training-cla-coaching-wembanyana-ohtani/">constraints-led approach</a> (CLA) to training is learning methodology that attempts to expedite high-level skill development by imposing constraints. The thoughtful design of the constraints comes from a coach or trainer who knows CLA and perception-action coupling, a kind of meta-cognition where sensemaking in a realistic and constrained training scenario informs future behavior. It’s a higher-order habit meant to create situational preparedness in high-pressure, complex, future settings.</p>
<p>What if you just want to eat less bacon, or improve sleep hygiene? Garmin recently <a href="https://www.dcrainmaker.com/2025/09/lifestyle-logging-journaling-health-status-vs-whoop-everything.html">added</a> a “Life Logging” feature to many of the company’s recent edition sport watches. The feature matches a popular aspect of Whoop biometric-tracking bracelets. The on-screen reminders delivered to your watch attach information to a wide range of daily (the typical time interval) wellness observables. The lightweight interaction is a straightforward way to connect behavior to performance when the goal is to change both of those things. <a href="https://www.nytimes.com/2025/09/27/business/oura-ring-tom-hale.html">Reporting</a> by The New York Times suggests that high-performing business executives are doing something like this with Oura rings.</p>
<p>Research technologies are coming that will reduce the cognitive overhead for tracking and adopting habits. <a href="https://news.feinberg.northwestern.edu/2025/09/19/wearable-sensors-could-reshape-obesity-treatment/">Northwestern researchers</a> combine 2 wearables (wrist + necklace), 1 body camera, and a phone app to thoroughly document research subjects’ eating habits. The system gets high-fidelity gesture data from the wearables, and the body camera also recognizes activity signatures that are unique to eating. The product of this research is an effective diagnostic, showing that overeating takes multiple forms and the patterns have emotional, behavioral and contextual dimensions. Work continues, and the hope is for clinicians to use these same tools for personalization and support to enable habit changes.</p>
<p><a href="https://www.myfoodrepo.ai/en/blog/introducing-hei-41bb6181-237a-4acf-b94f-64d0badf6fb8">MyFoodRepo</a> is a picture-based meal-tracking app developed by Marcel Salathe and his team at EPFL in Switzerland. The researchers combined their meal tracking with ongoing checks of microbe populations in subject microbiomes. Gut health (specifically, gut diversity), <a href="https://news.epfl.ch/news/ai-nutrition-study-finds-five-every-day-may-keep-t/">they found</a>, depends on how consistently a person eats well, and not just on what a person’s nutrition intake is like. Habits are central to basic body function.</p>
<p>Privacy protection is crucial given the personal aspects of habits. That becomes more true as the stakes elevate for good habits and personal health. Athletes are going to experience higher stakes when habits go under a microscope based on the public nature of sports performance. Understanding habit formation needs to go hand in hand with understanding how to keep that information private.</p>
</section>
<section id="stacks-vs.-open-why-choose" class="level3">
<h3 class="anchored" data-anchor-id="stacks-vs.-open-why-choose">Stacks vs.&nbsp;Open, Why Choose?</h3>
<p>Hudl recently described a research meeting between the company and Mexican university researchers <a href="https://www.hudl.com/blog/hudl-citec-performance-workshop-event">on the company blog</a>. Hudl is among the first sports technology companies to deliver a software “stack.” Software stacks go back the 2000s when most every dynamic website ran on a LAMP stack (Linux, Apache, MySql, Perl/Php/Python). The essential pieces for a sports infrastructure stack are: 1. athletes’ data collection, 2. athletes’ data management, 3. athletes’ data analysis, and 4. athletes’ data reporting. The integration of the pieces, done as seamlessly as possible, make for a stack and make that stack a more useful product than any of the singular pieces by themselves. <a href="https://teamworks.com/blog/teamworks-acquires-telemetry-sports/">Teamworks</a> is the other company that makes a sports stack for teams to buy.</p>
<p>The risk to a team who buys a stack is lock-in, a combination of dependence on and reluctance to leave a technology platform. Lock-in, <a href="https://pluralistic.net/2024/01/24/everything-not-mandatory/">according to</a> technology journalist and activist Cory Doctorow, is the first step to enshittification (platform decay) which occurs when companies with lots of dependent customers prioritize exerting control over customers, instead of delivering value to customers.</p>
<p>The LAMP stack was (still is) Open Source technology, which effectively steered it away from enshittification. Open Source (and the related Open Data) is a way to prioritize customer value over long term time windows. The Open Source software model demonstrated by LAMP also scaled well, supporting the explosive growth that the Internet experienced as it got its legs during the early 21st Century. Calls for Open methods and shared infrastructure and practices <a href="https://bjsm.bmj.com/content/58/6/293">like this</a> by Garret Bullock and <a href="https://bjsm.bmj.com/content/59/18/1270">this</a> by Natalie Kupperman promote the awareness and benefits of community stakeholding.</p>
<p>Research participation is different in closed and in open platforms. How? Social media data (Facebook, Twitter) used to be widely available and no-cost. Companies met the demand from researchers and developers with APIs. <a href="https://web.archive.org/web/20170908050806/https://www.sporttechie.com/sports-technology-problem-end-user-programming/">Years ago I wrote</a> about how the APIs to customize sports software was not being demanded or created, and I am not sure how much progress has been made in the time since. End-user programming, as I wrote, is the bottom-up expression of demand for Open infrastructure and data. At present, Open research in sports exists, but not at scales large enough to be useful.</p>
<p>Top-down progress does not necessarily lead to enshittification. Bottom-up progress does not necessarily gain traction to reach broad-based utility. The need is for some optimizaton of both, top-down and bottom-up, to create a check and balance that guarantees customer value from their sports software.</p>
</section>
<section id="big-data-bowl-2026" class="level3">
<h3 class="anchored" data-anchor-id="big-data-bowl-2026">Big Data Bowl 2026</h3>
<p>The NFL announced the criteria for its <a href="https://operations.nfl.com/gameday/analytics/big-data-bowl/">2026 Big Data Bowl</a> (BDB), the annual competition where anyone can take real NFL game data and then answer important (to the NFL at least) research questions. Submissions are judged and cash prizes are given. The combination of real-world data and the accessibility of the Kaggle coding competitions platform makes BDB something far less intimidating than you might expect. There is an engaged community (that includes the NFL researchers who put forward the competition research questions and data set) and the nature of the competition is easy enough to understand and not so cutthroat. The NFL wants to gain deeper insight from the location-tracking data that wearable sensors measure for each player on the field, at a rate of 10 frames per second (in the Kaggle competition data set).</p>
<p>The BDB competition has one data set and two tracks. The data set is player movement tracking data for NFL passing plays leading up to the moment that the forward pass is thrown. The task, and the goal of one competition track, is to predict the ongoing player movement as the football moves through the air. The second competition track is to formulate a metric (or, short of that, a video commentary) that describes some aspect of player movement that is accessible to football professionals (like coaches) and football fans (like most Americans).</p>
<p>The corpus of relevant research and analysis tools did not take long to assemble: 1. <a href="https://www.youtube.com/watch?v=2xg3nyPNo3s&amp;t=2221s">2023 CMSAC workshop video</a> 2. <a href="https://www.annualreviews.org/content/journals/10.1146/annurev-statistics-033021-110117">Kovalchik, Player Tracking Data in Sports</a> 3. <a href="https://github.com/sportsdataverse/sportyR">sportyR</a> 4. <a href="https://github.com/nflverse/nflverse">NFLverse</a> 5. <a href="https://nflfastr.com/articles/nflfastR.html">NFLfastr</a> 6. <a href="https://nflfastr.com/articles/nflfastR.html">Get started with nflfastR</a> 7. <a href="https://arxiv.org/abs/2507.06122">A Bayesian circular mixed-effects model for explaining variability in directional movement in American football</a> 8. <a href="https://arxiv.org/abs/2406.17220">NFL Ghosts: A framework for evaluating defender positioning with conditional density estimation</a> 9. <a href="https://statthinksportsanalytics.substack.com/p/thoughts-on-big-data-bowl-2025">Ron Yurko’s Thoughts on Big Data Bowl 2025</a> 10. <a href="https://www.kaggle.com/code/lorihe/survival-analysis-on-progress-after-caught">Survival Analysis on Progress after Caught</a> 11. <a href="https://www.kaggle.com/code/pvabish/modeling-with-transformers-by-sumersports/notebook">Modeling with Transformers</a> 12. <a href="https://sumersports.com/the-zone/nfl-advanced-stats/">NFL Advanced Stats: How To Use Them and What They Mean</a></p>
<p>The 2026 BDB competition is a step in the direction of integrating athlete biomechanics into game analysis. That’s what Luke Camarao and I have in mind for our submission. If it goes well and we have useful prediction and analytics algorithms for player movement during NFL pass plays then I might also have a starting point to generate synthetic data, something where I can apply and test different amounts of noise to the contest data and then see how the added noise affects player movement predictions.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/newsletter\.bradstenger\.com");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>