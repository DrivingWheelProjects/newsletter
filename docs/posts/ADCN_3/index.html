<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Brad Stenger">
<meta name="dcterms.date" content="2025-09-08">

<title>ADCN: Women Athletes Research, Sports Injury Epidemiology, Hot Hands – newsletter</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-a37c72dd2dbac68997fcdc15a3622e78.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-33562ca0c45c858621f5a0460d4134bc.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">newsletter</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">ADCN: Women Athletes Research, Sports Injury Epidemiology, Hot Hands</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Brad Stenger </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 8, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<div style="height:290">
    <iframe src="https://cdn.forms-content.sg-form.com/ed8875f7-7972-11f0-ad55-92cd5bc3b37f" width="340" height="300" scrolling="no"></iframe>
</div>

</div></div>
        
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>There’s a lengthy rundown on women athletes’ health and performance research. The news peg for it is the announcement of a new University of Indiana initiative, which gave me a chance to look at the bigger picture. Short answer, it’s in a much better place than it was in five or ten years ago. And there is a good chance that it could snowball, as the research raises more questions and technology advances new ways to answer those questions. You, the readers, can expect overviews like this as opportunities to come up to speed on crucial subjects materialize. I thank you for your attention.</p>
<section id="indiana-university-female-sports-performance-and-research-initiative" class="level3">
<h3 class="anchored" data-anchor-id="indiana-university-female-sports-performance-and-research-initiative">Indiana University Female Sports Performance and Research Initiative</h3>
<p><em>and a rundown of women athletes research</em></p>
<p>Indiana University recently announced a women athletes <a href="https://news.iu.edu/live/news/46944-new-female-sports-performance-and-research-initiative-">research initiative</a> in partnership with Indiana Sports Corp and Pacers Sports &amp; Entertainment. No dollar or grant-specific information was forthcoming but the program’s research committee co-chair, Katie Siek, is a revealing choice. Siek is professor of informatics and a human- and health-centered computer scientist. (The other co-chair of the research committee is Avinash Chandran, whose work is also discussed in this newsletter.) “Our whole goal here is to actually collect that data and help create interactive systems so that athletes can get better information to improve their health, and the health care system can better provide support for them,” Siek <a href="https://indianapolisrecorder.com/female-sports-performance-research-initiative/">told</a> the Indianapolis Record news organization.</p>
<p>Sports research has been gaining currency in the computing research community that focuses on human-centered computing and human-computer interaction. After a major conference workshop in 2024 sports researchers in the community published <a href="https://dl.acm.org/doi/10.1145/3613904.3642050">Grand Challenges in SportsHCI</a> which stated that “we believe in the benefit of generating fundamental knowledge for SportsHCI more broadly to advance the field as a whole. To achieve this, we aim to identify the grand challenges in SportsHCI, which can help researchers and practitioners in developing a future research agenda.” University of Florida researchers published follow-up work last spring, <a href="https://dl.acm.org/doi/10.1145/3706598.3714026">Coach, Data Analyst, and Protector: Exploring Data Practices of Collegiate Coaching Staff</a> that enlisted coaches for focus groups and found that “coaching staff selectively use data with the goal of balancing performance goals, athlete emotional well-being, and privacy.” Siek <a href="https://news.iu.edu/luddy/live/news/44656-luddy-school-study-to-help-women-achieve-peak">has studied</a> prototypes of DaVinci Wearables’ technology that tracks female athlete physiology through biometrics (body temperature, galvanic skin response, body composition, cycle tracking) and assists athletes in reaching performance goals.</p>
<p>A sports research initiative based on computing is a new kind of interdisciplinary hub for this work. The <a href="https://humanperformancealliance.org/">Wu Tsai Human Performance Alliance</a> based primarily at Stanford University is broadly based in medical and life science. The University of Michigan <a href="https://hpssc.umich.edu/">Human Performance &amp; Sport Science Center</a> resides in the School of Kinesiology. The FIFA <a href="https://inside.fifa.com/womens-football/development-programmes">Women’s Football Development Programme</a> takes a soccer-centric approach. The International Olympic Committee has created the <a href="https://www.instagram.com/p/DIMRjR-z73I/">Female, woman, and girl Athlete Injury pRevention (FAIR) consensus</a>.</p>
<p>Papers, conferences and spinouts are a good indicator for when a research initiative has hit critical mass and has impact. The FIFA Women’s group has <a href="https://link.springer.com/collections/ffcdffcfcb">a set of papers</a>, many attempting to define benchmarks for elite women athletes, covering injury events and recovery parameters (links). The FAIR consensus has also produced a <a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C46&amp;q=%22%28FAIR%29+consensus%22+Crossley&amp;btnG=">series of expert reviews</a> on gender affects and prevention strategies for sport-related injury. The group also recently held the <a href="https://www.ucalgary.ca/sport-injury-prevention-research-centre/female-woman-and-girl-athlete-health-and-safety-summit">Female, Woman, and Girl Athlete Health and Safety Summit</a> at the University of Calgary. The sixth editon of the <a href="https://www.femaleathleteconference.com/">Female Athlete Conference</a> took place last spring in Boston and conference founder Kate Ackerman is the director of the new <a href="https://www.whspmedical.com/institute">Women’s Health, Sports &amp; Performance Institute</a>, a translational sports medicine research center outside Boston. Stanford and Wu Tsai Human Performance Alliance will host its inaugural <a href="https://humanperformancealliance.org/event/female-athlete-research-meeting/">Female Athlete Research Meeting (FARM)</a> in November.</p>
</section>
<section id="bayesian-injury-rate-estimation" class="level3">
<h3 class="anchored" data-anchor-id="bayesian-injury-rate-estimation">Bayesian Injury Rate Estimation</h3>
<p><em>a shift is underway from “frequentist” to “Bayesian” injury surveillance analysis</em></p>
<p>A couple of recent papers by Avinash Chandran announce a shift in the way that the NCAA does injury surveillance. Chandran describes the change as moving from a “frequentist” approach to a Bayesian approach in two papers: <a href="https://link.springer.com/article/10.1007/s40279-025-02312-4">The Practical Value of Bayesian Inference in Describing the Epidemiology of Sports Injuries</a> from <em>Sports Medicine</em> journal, and <a href="https://injepijournal.biomedcentral.com/articles/10.1186/s40621-025-00583-z">Bayesian methods for estimating injury rates in sport injury epidemiology</a> from <em>Injury Epidemiology</em> journal. Chandran is the injury epidemiologist in charge of the NCAA Injury Surveillance Program for the Datalys Center, a non-profit collaborative research organization originally founded by the NCAA and the American College of Sports Medicine.</p>
<p>The difference between frequentist and Bayesian is almost as stark as analysis before and after the emergence of data science. Frequentist approaches center on counts and the traditional practice of statistical hypothesis tests, statistical significance and p-values. Bayesian approaches, in general, can take any and all prior information and then use that information to calculate posterior probabilities for the likelihood of statistical events. The frequentist approach is what it is, while the Bayesian approach iterates and evolves as meaningful prior information is applied. The change is a crucial progress step for injury surveillance and, potentially, for the NCAA.</p>
<p>Why you ask? Injury surveillance has its benchmark measurement, called injury rate, which in frequentist terms is the number of injury occurrences divided by the number of injury exposures. Chandran’s workflow for an injury rate Bayesian model looks like this. <img src="BayesianWorkflow.png" class="img-fluid" alt="Sample workflow describing analytical approach for Bayesian estimations of injury rate using sport injury surveillance data - Chandran et al."></p>
<p>New information that will improve injury rate calculation are coming. Biometric, biomechanical and biomarker information now present a more in-depth picture of athletes’ ongoing physiology along with essential recovery and fatigue details. The rate-limiting step probably is not going to be the lag in completing the studies to merge the new information. More likely the greater lag will come from organizing the athletes’ data into coherent pathways for causal analysis of athletes’ injuries that can make the sum of all the investigations greater than its parts. The NCAA and its Sports Science Institute could champion the effort, and so could the federal government if it decides to play a role in managing college sports. Professional sports leagues could also provide a guiding hand, and as a result become a major beneficiary of the research.</p>
</section>
<section id="hot-hand-and-talent-evaluation" class="level3">
<h3 class="anchored" data-anchor-id="hot-hand-and-talent-evaluation">Hot Hand and Talent Evaluation</h3>
<p><em>extending the Hot Hand Fallacy to front office decision-making</em></p>
<p>The <a href="https://thedecisionlab.com/biases/hot-hand-fallacy">hot-hand fallacy</a> has been a talking point since Amos Tversky and colleagues first identified the hot-hand in the 1980s.</p>
<p>The idea is simple. Recent success increases the likelihood of future success. The classic case, the one Tversky identified, is the basketball player who makes a few shots in a row, prompting both the player and teammates to expect the next shot to go in as well. The premise has been rebutted and amended by psychologists, economists and statisticians seeking ground truth for what is more accurately called a heuristic. That heuristic is often (but not always) a source of bad decisions and bad outcomes. A couple of recent articles prompted me to ask if the front office decision-making is as prone to hot-handedness as the players on the court, ice, pitch or field.</p>
<p>“The relationship between cash and winning in the NFL is complicated,” Mike Sando writes at the start of his September 12 article at The Athletic, <a href="https://www.nytimes.com/athletic/6577082/2025/09/12/nfl-salary-cap-cash-spending-ranking/">Ranking NFL teams by spending: The boldest, most frugal and best bang for the buck</a>. Front offices make personnel decisions with varying degrees of confidence and uncertainty. No organization gets every transaction right. But string together personnel wins, whether by draft, trade or free agency and it shows up as wins on the field. To believe that an organization’s decision process is more sound than lucky is to play the hot hand. When that happens the team-wide regression to the mean is imminent.</p>
<p>Some singular moves can turn out bo be force multipliers according to Sando’s analysis. The Chiefs pay less than market value for an All-World quarterback. The Rams have a superior coach known to do more with less. Some teams have a philosophy that raises their floor. The Eagles always choose to spend money on talent when given the opportunity. The Steelers spend lots more on defense than on offense.</p>
<p>“When one contention window closes, another one opens,” Dom Luszczyszyn and Scott Wheeler write at the start of their September 17 article, also at The Athletic, <a href="https://www.nytimes.com/athletic/6597949/2025/09/17/nhl-contention-cycle-player-tiers-2025-26/">The NHL Contention Cycle: Where does each team stand going into 2025-26 and in the future?</a> Like the NFL, teams are all over the place with some rising and others falling. The regression to the mean among NHL hockey teams is maybe more random, and therefore more unavoidable, than NFL football teams if you agree that title contention is cyclical.</p>
<p>Liverpool has held on to its elite position in the Premiere League despite significant squad turnover. This <a href="https://sports.yahoo.com/article/attacking-star-fears-eased-sports-115000532.html">last article</a>, originally from OneFootball’s Anfield Index blog, describes how the team’s sports science and medical department play a crucial role in talent evaluation. The athletes’ health and performance information was part of the team’s big-money decisions to extend Mohammad Sala’s contract (despite his advanced age) and to acquire Alexander Isak (despite his injury concerns). <a href="https://www.nytimes.com/athletic/6543303/2025/09/12/liverpool-transfer-window-analysis/">Another article</a>, again by The Athletic, provides an in-depth analysis of Liverpool’s summer transfer ins and outs. Hidden in the details is how Will Spearman, director of research, championed the signing of Hugo Ekitike, comparing his age-grade statistics to Haaland and Mbappe. If there is an overarching philosophy, Liverpool shows a strong desire to stay young, “Every player Liverpool signed, with the exception of backup goalkeeper Freddie Woodman, is aged 25 or under.” Has the squad’s front office operators raised the team’s floor, or is the inevitable regression to the mean coming? Liverpool’s season is off to a fantastic start but it’s a long season ahead.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/newsletter\.bradstenger\.com");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>